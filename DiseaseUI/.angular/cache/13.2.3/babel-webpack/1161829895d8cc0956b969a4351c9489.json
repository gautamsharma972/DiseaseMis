{"ast":null,"code":"import { moveItemInArray } from '@angular/cdk/drag-drop';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../_services/api.service\";\nimport * as i2 from \"@ngneat/hot-toast\";\n\nfunction DiseaseComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵelement(2, \"i\", 15);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.content.errorMessage, \" \");\n  }\n}\n\nfunction DiseaseComponent_div_17_div_1_label_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\", 32);\n    i0.ɵɵelement(1, \"i\", 33);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngClass\", item_r3.diseaseType.id == 2 ? \"text-red-500\" : \"text-gray-500\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", item_r3.diseaseType.id == 2 ? \"fa-circle text-red-500\" : \"fa-circle text-gray-500\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r3.diseaseType.type, \" \");\n  }\n}\n\nfunction DiseaseComponent_div_17_div_1_div_19_tr_9_span_4_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \",\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DiseaseComponent_div_17_div_1_div_19_tr_9_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵtemplate(2, DiseaseComponent_div_17_div_1_div_19_tr_9_span_4_span_2_Template, 2, 0, \"span\", 38);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const subSyp_r13 = ctx.$implicit;\n    const last_r14 = ctx.last;\n    const symptoms_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", subSyp_r13.name, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !last_r14 && symptoms_r10.subSystoms.length > 1);\n  }\n}\n\nfunction DiseaseComponent_div_17_div_1_div_19_tr_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtemplate(4, DiseaseComponent_div_17_div_1_div_19_tr_9_span_4_Template, 3, 2, \"span\", 37);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const symptoms_r10 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", symptoms_r10.name, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", symptoms_r10.subSymptoms);\n  }\n}\n\nfunction DiseaseComponent_div_17_div_1_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34);\n    i0.ɵɵelementStart(1, \"table\", 35);\n    i0.ɵɵelementStart(2, \"thead\", 36);\n    i0.ɵɵelementStart(3, \"tr\");\n    i0.ɵɵelementStart(4, \"th\");\n    i0.ɵɵtext(5, \"Symptoms\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Sub Symptoms\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"tbody\");\n    i0.ɵɵtemplate(9, DiseaseComponent_div_17_div_1_div_19_tr_9_Template, 5, 2, \"tr\", 37);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngForOf\", item_r3.symptoms);\n  }\n}\n\nfunction DiseaseComponent_div_17_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelementStart(1, \"div\", 19);\n    i0.ɵɵelementStart(2, \"div\", 20);\n    i0.ɵɵelementStart(3, \"div\");\n    i0.ɵɵelementStart(4, \"span\", 21);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6);\n    i0.ɵɵelementStart(7, \"span\", 21);\n    i0.ɵɵtext(8, \"\\u00A0 | \\u00A0\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"a\", 22);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 23);\n    i0.ɵɵtemplate(12, DiseaseComponent_div_17_div_1_label_12_Template, 3, 3, \"label\", 24);\n    i0.ɵɵelementStart(13, \"label\", 25);\n    i0.ɵɵlistener(\"click\", function DiseaseComponent_div_17_div_1_Template_label_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const item_r3 = restoredCtx.$implicit;\n      const ctx_r18 = i0.ɵɵnextContext(2);\n      return ctx_r18.edit(item_r3);\n    });\n    i0.ɵɵelement(14, \"i\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"swal\", 27, 28);\n    i0.ɵɵlistener(\"confirm\", function DiseaseComponent_div_17_div_1_Template_swal_confirm_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const item_r3 = restoredCtx.$implicit;\n      const ctx_r20 = i0.ɵɵnextContext(2);\n      return ctx_r20.delete(item_r3.id);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"a\", 29);\n    i0.ɵɵelement(18, \"i\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(19, DiseaseComponent_div_17_div_1_div_19_Template, 10, 1, \"div\", 31);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    const i_r4 = ctx.index;\n\n    const _r6 = i0.ɵɵreference(16);\n\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", i_r4 + 1, \". \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r3.name, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"Symptoms (\", item_r3.symptoms.length, \")\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", item_r3.diseaseType != null);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"title\", \"Delete \", item_r3.name, \"?\");\n    i0.ɵɵproperty(\"showCancelButton\", true)(\"focusCancel\", true);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"swal\", _r6);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", item_r3.symptoms.length > 0);\n  }\n}\n\nfunction DiseaseComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵlistener(\"cdkDropListDropped\", function DiseaseComponent_div_17_Template_div_cdkDropListDropped_0_listener($event) {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return ctx_r21.drop($event, ctx_r21.content.data);\n    });\n    i0.ɵɵtemplate(1, DiseaseComponent_div_17_div_1_Template, 20, 9, \"div\", 17);\n    i0.ɵɵpipe(2, \"filter\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(2, 1, ctx_r1.content.data, ctx_r1.searchTerm));\n  }\n}\n\nconst _c0 = function () {\n  return {\n    standalone: false\n  };\n};\n\nexport let DiseaseComponent = /*#__PURE__*/(() => {\n  class DiseaseComponent {\n    constructor(apiService, toast) {\n      this.apiService = apiService;\n      this.toast = toast;\n      this.content = {\n        title: '',\n        name: \"Diseases\",\n        data: [],\n        fields: [],\n        errorMessage: \"\",\n        apiLink: '/diseases',\n        caller: '',\n        Diseases: {\n          diseaseTypes: [],\n          diseaseType: {},\n          symptoms: [{\n            subSymptoms: [{}]\n          }]\n        }\n      };\n    }\n\n    ngOnInit() {\n      this.get();\n    }\n\n    get() {\n      this.apiService.getData('/diseases', null).subscribe(res => {\n        if (!res) {\n          this.toast.error(\"Could not connect to Server. Try again after sometime.\", {\n            position: 'top-right',\n            autoClose: true\n          });\n        } else {\n          if (res.length <= 0) {\n            this.content.errorMessage = \"No Disease list found. Click 'Add New' to add.\";\n          }\n\n          this.content.data = res;\n        }\n      }, error => {\n        this.content.errorMessage = \"Could not load data at this time. Try again later.\";\n      });\n    }\n\n    create() {\n      this.content.title = `Add ${this.content.name}`;\n      this.content.caller = 'POST';\n      this.content.Diseases = {\n        diseaseType: {},\n        symptoms: [{\n          subSymptoms: [{}]\n        }]\n      };\n      this.getDiseaseType();\n    }\n\n    getDiseaseType() {\n      this.apiService.getData('/diseases/category', null).subscribe(res => {\n        if (!res) {\n          this.toast.error(\"Could not connect to Server. Try again after sometime.\", {\n            position: 'top-right',\n            autoClose: true\n          });\n        } else {\n          if (res.length <= 0) {\n            this.content.errorMessage = \"No Disease Type list found. Click 'Add New' to add.\";\n          }\n\n          this.content.Diseases.diseaseTypes = res;\n        }\n      }, error => {\n        this.content.errorMessage = \"Could not load data at this time. Try again later.\";\n      });\n    }\n\n    drop(event, diseaseData) {\n      moveItemInArray(this.content.data, event.previousIndex, event.currentIndex);\n      diseaseData.forEach(function (_data, index) {\n        _data.listingOrder = index;\n      });\n      console.log(diseaseData);\n      this.apiService.postData('/diseases/updateListingOrder', diseaseData).subscribe(res => {//\n      });\n    }\n\n    edit(item) {\n      this.content.title = `Edit ${this.content.name}`;\n      this.content.caller = 'PUT';\n      this.getDiseaseType();\n      this.content.Diseases = item;\n    }\n\n    delete(id) {\n      this.apiService.deleteData(`${this.content.apiLink}/${id}`, id).subscribe(res => {\n        if (res) {\n          this.toast.success(\"Item Deleted\", {\n            position: 'top-right',\n            autoClose: true\n          });\n        }\n      }, error => {\n        this.toast.error(\"Error deleting, try again after sometime.\", {\n          position: 'top-right',\n          autoClose: true\n        });\n      });\n    }\n\n  }\n\n  DiseaseComponent.ɵfac = function DiseaseComponent_Factory(t) {\n    return new (t || DiseaseComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.HotToastService));\n  };\n\n  DiseaseComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DiseaseComponent,\n    selectors: [[\"app-disease\"]],\n    decls: 19,\n    vars: 8,\n    consts: [[1, \"flex\", \"flex-wrap\"], [1, \"container\", \"mt-5\", \"grid\", \"grid-cols-2\"], [1, \"card-title\"], [1, \"flex-column\"], [1, \"text-sm\", \"text-gray-500\"], [1, \"fa\", \"fa-edit\"], [1, \"flex\", \"justify-self-end\"], [1, \"form-control\", \"justify-self-end\", \"w-full\"], [\"type\", \"search\", \"placeholder\", \"Search\", 1, \"input\", \"input-bordered\", 3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\"], [1, \"btn\", \"btn-primary\", \"ml-5\", \"modal-button\", 3, \"for\", \"click\"], [1, \"fa-solid\", \"fa-plus\", \"mr-2.5\"], [\"class\", \"mt-5 alert shadow alert-error\", 4, \"ngIf\"], [\"class\", \"overflow-x-auto w-full mt-5\", \"cdkDropList\", \"\", 3, \"cdkDropListDropped\", 4, \"ngIf\"], [3, \"content\"], [1, \"mt-5\", \"alert\", \"shadow\", \"alert-error\"], [1, \"fa\", \"fa-exclamation-triangle\", \"text-yellow\"], [\"cdkDropList\", \"\", 1, \"overflow-x-auto\", \"w-full\", \"mt-5\", 3, \"cdkDropListDropped\"], [\"cdkDrag\", \"\", \"style\", \"cursor:move\", \"tabindex\", \"0\", \"class\", \"collapse border border-base-300 mb-3 bg-base-100 rounded-box collapse-plus\", 4, \"ngFor\", \"ngForOf\"], [\"cdkDrag\", \"\", \"tabindex\", \"0\", 1, \"collapse\", \"border\", \"border-base-300\", \"mb-3\", \"bg-base-100\", \"rounded-box\", \"collapse-plus\", 2, \"cursor\", \"move\"], [1, \"collapse-title\", \"font-medium\"], [1, \"grid-cols-2\", \"grid\"], [1, \"text-gray-500\"], [1, \"text-primary\"], [1, \"place-self-end\"], [\"class\", \"mr-4\", 3, \"ngClass\", 4, \"ngIf\"], [\"href\", \"javascript:void(0)\", \"for\", \"Diseases-modal\", 1, \"mr-3\", \"modal-button\", 3, \"click\"], [1, \"fa\", \"fa-pen-to-square\", \"fa-1x\"], [\"text\", \"This will delete all its symptoms and their related sub-symptoms.\", \"icon\", \"question\", 3, \"title\", \"showCancelButton\", \"focusCancel\", \"confirm\"], [\"deleteSwal\", \"\"], [1, \"mr-3\", 3, \"swal\"], [1, \"fa\", \"fa-trash-can\", \"fa-1x\", \"text-red-500\"], [\"class\", \"collapse-content\", 4, \"ngIf\"], [1, \"mr-4\", 3, \"ngClass\"], [1, \"fa\", 3, \"ngClass\"], [1, \"collapse-content\"], [1, \"table\", \"w-full\", \"border\"], [1, \"\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"]],\n    template: function DiseaseComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"h1\", 2);\n        i0.ɵɵelementStart(3, \"span\", 3);\n        i0.ɵɵtext(4);\n        i0.ɵɵelement(5, \"br\");\n        i0.ɵɵelementStart(6, \"span\", 4);\n        i0.ɵɵtext(7, \"Click '\");\n        i0.ɵɵelement(8, \"i\", 5);\n        i0.ɵɵtext(9, \"' icon to edit list item.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 6);\n        i0.ɵɵelementStart(11, \"div\", 7);\n        i0.ɵɵelementStart(12, \"input\", 8);\n        i0.ɵɵlistener(\"ngModelChange\", function DiseaseComponent_Template_input_ngModelChange_12_listener($event) {\n          return ctx.searchTerm = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"label\", 9);\n        i0.ɵɵlistener(\"click\", function DiseaseComponent_Template_label_click_13_listener() {\n          return ctx.create();\n        });\n        i0.ɵɵelement(14, \"i\", 10);\n        i0.ɵɵtext(15, \" Add new \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(16, DiseaseComponent_div_16_Template, 4, 1, \"div\", 11);\n        i0.ɵɵtemplate(17, DiseaseComponent_div_17_Template, 3, 4, \"div\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(18, \"edit-disease-view\", 13);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" Manage \", ctx.content.name, \" \");\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngModel\", ctx.searchTerm)(\"ngModelOptions\", i0.ɵɵpureFunction0(7, _c0));\n        i0.ɵɵadvance(1);\n        i0.ɵɵpropertyInterpolate1(\"for\", \"\", ctx.content.name, \"-modal\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.content.errorMessage != \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.content.data.length > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"content\", ctx.content);\n      }\n    },\n    styles: [\"\"]\n  });\n  return DiseaseComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}