{"ast":null,"code":"import _asyncToGenerator from \"D:\\\\Projects\\\\DiseaseMIS\\\\Disease_UI\\\\Disease_UI\\\\UI\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../_services/api.service\";\nimport * as i2 from \"@ngneat/hot-toast\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../../../_services/authentication.service\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"../laboratory-form/laboratory-form.component\";\nimport * as i7 from \"../../../utils/disable-directive\";\n\nfunction LaboratoryExaminationComponent_div_0_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \" Fill up the Master Data first. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LaboratoryExaminationComponent_div_0_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \" Contact your Administrator to fill the Master Data first. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LaboratoryExaminationComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 3);\n    i0.ɵɵelement(3, \"path\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, LaboratoryExaminationComponent_div_0_span_4_Template, 2, 0, \"span\", 5);\n    i0.ɵɵtemplate(5, LaboratoryExaminationComponent_div_0_span_5_Template, 2, 0, \"span\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.content.user.userRoles.includes(\"Head Office\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.content.user.userRoles.includes(\"Head Office\"));\n  }\n}\n\nfunction LaboratoryExaminationComponent_ng_template_1_i_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"i\", 16);\n  }\n}\n\nfunction LaboratoryExaminationComponent_ng_template_1_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 17);\n    i0.ɵɵtext(1, \" '\");\n    i0.ɵɵelementStart(2, \"i\", 18);\n    i0.ɵɵtext(3, \"*\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"' marked fields are mandatory. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LaboratoryExaminationComponent_ng_template_1_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 17);\n    i0.ɵɵelement(1, \"i\", 19);\n    i0.ɵɵtext(2, \" To view old forms, select the month and other fields below to filter out. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LaboratoryExaminationComponent_ng_template_1_ng_template_9_span_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 22);\n    i0.ɵɵtext(1, \"loading\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LaboratoryExaminationComponent_ng_template_1_ng_template_9_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function LaboratoryExaminationComponent_ng_template_1_ng_template_9_button_1_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext(3);\n      return ctx_r15.save();\n    });\n    i0.ɵɵtext(1, \" Save \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"ngClass\", ctx_r14.loading ? \"hidden\" : \"\");\n  }\n}\n\nfunction LaboratoryExaminationComponent_ng_template_1_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, LaboratoryExaminationComponent_ng_template_1_ng_template_9_span_0_Template, 2, 0, \"span\", 20);\n    i0.ɵɵtemplate(1, LaboratoryExaminationComponent_ng_template_1_ng_template_9_button_1_Template, 2, 1, \"button\", 21);\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r7.loading);\n  }\n}\n\nfunction LaboratoryExaminationComponent_ng_template_1_ng_template_10_span_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 22);\n    i0.ɵɵtext(1, \"Saving\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LaboratoryExaminationComponent_ng_template_1_ng_template_10_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function LaboratoryExaminationComponent_ng_template_1_ng_template_10_button_1_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext(3);\n      return ctx_r19.approveEdit();\n    });\n    i0.ɵɵtext(1, \" Approve Edit \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LaboratoryExaminationComponent_ng_template_1_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, LaboratoryExaminationComponent_ng_template_1_ng_template_10_span_0_Template, 2, 0, \"span\", 20);\n    i0.ɵɵtemplate(1, LaboratoryExaminationComponent_ng_template_1_ng_template_10_button_1_Template, 2, 0, \"button\", 24);\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.content.fileLocked);\n  }\n}\n\nfunction LaboratoryExaminationComponent_ng_template_1_ng_template_11_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 3);\n    i0.ɵɵelement(3, \"path\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" Form read only. To edit, get the permission from 'Admin'. To view the old form, select Month below. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LaboratoryExaminationComponent_ng_template_1_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, LaboratoryExaminationComponent_ng_template_1_ng_template_11_div_0_Template, 5, 0, \"div\", 0);\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.content.fileLocked);\n  }\n}\n\nfunction LaboratoryExaminationComponent_ng_template_1_div_13_div_7_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 31);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const district_r24 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", district_r24.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", district_r24.name, \" \");\n  }\n}\n\nfunction LaboratoryExaminationComponent_ng_template_1_div_13_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"label\", 27);\n    i0.ɵɵtext(2, \" District\");\n    i0.ɵɵelementStart(3, \"span\", 18);\n    i0.ɵɵtext(4, \"*\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"select\", 29);\n    i0.ɵɵlistener(\"ngModelChange\", function LaboratoryExaminationComponent_ng_template_1_div_13_div_7_Template_select_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r25 = i0.ɵɵnextContext(3);\n      return ctx_r25.content.forms.district.id = $event;\n    });\n    i0.ɵɵtemplate(6, LaboratoryExaminationComponent_ng_template_1_div_13_div_7_option_6_Template, 2, 2, \"option\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r22 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r22.content.forms.district.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r22.content.districts);\n  }\n}\n\nfunction LaboratoryExaminationComponent_ng_template_1_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r28 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵelementStart(2, \"label\", 27);\n    i0.ɵɵtext(3, \" Month & Year\");\n    i0.ɵɵelementStart(4, \"span\", 18);\n    i0.ɵɵtext(5, \"*\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"input\", 28);\n    i0.ɵɵlistener(\"change\", function LaboratoryExaminationComponent_ng_template_1_div_13_Template_input_change_6_listener() {\n      i0.ɵɵrestoreView(_r28);\n      const ctx_r27 = i0.ɵɵnextContext(2);\n      return ctx_r27.getForm();\n    })(\"ngModelChange\", function LaboratoryExaminationComponent_ng_template_1_div_13_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r28);\n      const ctx_r29 = i0.ɵɵnextContext(2);\n      return ctx_r29.content.forms.createdDate = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, LaboratoryExaminationComponent_ng_template_1_div_13_div_7_Template, 7, 2, \"div\", 5);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r10.content.forms.createdDate);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r10.content.districts.length > 0);\n  }\n}\n\nfunction LaboratoryExaminationComponent_ng_template_1_div_14_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵelement(2, \"i\", 40);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r30 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r30.content.errors[0], \" \");\n  }\n}\n\nconst _c0 = function () {\n  return {\n    standalone: true\n  };\n};\n\nfunction LaboratoryExaminationComponent_ng_template_1_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r32 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 32);\n    i0.ɵɵelementStart(1, \"div\", 33);\n    i0.ɵɵtemplate(2, LaboratoryExaminationComponent_ng_template_1_div_14_div_2_Template, 4, 1, \"div\", 34);\n    i0.ɵɵelement(3, \"app-laboratory-form\", 35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 36);\n    i0.ɵɵelementStart(5, \"p\", 37);\n    i0.ɵɵtext(6, \"Add Remarks\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"textarea\", 38);\n    i0.ɵɵlistener(\"ngModelChange\", function LaboratoryExaminationComponent_ng_template_1_div_14_Template_textarea_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r31 = i0.ɵɵnextContext(2);\n      return ctx_r31.content.forms.remarks = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.content.errors.length > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"content\", ctx_r11.content)(\"appDisable\", ctx_r11.content.fileLocked);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"appDisable\", ctx_r11.content.fileLocked)(\"ngModel\", ctx_r11.content.forms.remarks)(\"ngModelOptions\", i0.ɵɵpureFunction0(6, _c0));\n  }\n}\n\nfunction LaboratoryExaminationComponent_ng_template_1_ng_template_16_span_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 22);\n    i0.ɵɵtext(1, \"loading\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LaboratoryExaminationComponent_ng_template_1_ng_template_16_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r36 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 42);\n    i0.ɵɵlistener(\"click\", function LaboratoryExaminationComponent_ng_template_1_ng_template_16_button_1_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r35 = i0.ɵɵnextContext(3);\n      return ctx_r35.save();\n    });\n    i0.ɵɵtext(1, \" Save \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r34 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"ngClass\", ctx_r34.loading ? \"hidden\" : \"\");\n  }\n}\n\nfunction LaboratoryExaminationComponent_ng_template_1_ng_template_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, LaboratoryExaminationComponent_ng_template_1_ng_template_16_span_0_Template, 2, 0, \"span\", 20);\n    i0.ɵɵtemplate(1, LaboratoryExaminationComponent_ng_template_1_ng_template_16_button_1_Template, 2, 1, \"button\", 41);\n  }\n\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r12.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r12.loading);\n  }\n}\n\nfunction LaboratoryExaminationComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵelementStart(1, \"h1\", 7);\n    i0.ɵɵelementStart(2, \"span\", 8);\n    i0.ɵɵtext(3);\n    i0.ɵɵtemplate(4, LaboratoryExaminationComponent_ng_template_1_i_4_Template, 1, 0, \"i\", 9);\n    i0.ɵɵelement(5, \"br\");\n    i0.ɵɵtemplate(6, LaboratoryExaminationComponent_ng_template_1_span_6_Template, 5, 0, \"span\", 10);\n    i0.ɵɵtemplate(7, LaboratoryExaminationComponent_ng_template_1_span_7_Template, 3, 0, \"span\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 11);\n    i0.ɵɵtemplate(9, LaboratoryExaminationComponent_ng_template_1_ng_template_9_Template, 2, 2, \"ng-template\", 1);\n    i0.ɵɵtemplate(10, LaboratoryExaminationComponent_ng_template_1_ng_template_10_Template, 2, 2, \"ng-template\", 1);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, LaboratoryExaminationComponent_ng_template_1_ng_template_11_Template, 1, 1, \"ng-template\", 1);\n    i0.ɵɵelement(12, \"hr\", 12);\n    i0.ɵɵtemplate(13, LaboratoryExaminationComponent_ng_template_1_div_13_Template, 8, 2, \"div\", 13);\n    i0.ɵɵtemplate(14, LaboratoryExaminationComponent_ng_template_1_div_14_Template, 8, 7, \"div\", 14);\n    i0.ɵɵelementStart(15, \"div\", 15);\n    i0.ɵɵtemplate(16, LaboratoryExaminationComponent_ng_template_1_ng_template_16_Template, 2, 2, \"ng-template\", 1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.content.name, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.content.fileLocked);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.content.user.userRoles.includes(\"Head Office\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.content.user.userRoles.includes(\"Head Office\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.content.fileLocked && !ctx_r1.content.user.userRoles.includes(\"Head Office\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.content.user.userRoles.includes(\"Head Office\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.content.user.userRoles.includes(\"Head Office\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.loading);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.content.fileLocked && !ctx_r1.content.user.userRoles.includes(\"Head Office\"));\n  }\n}\n\nexport let LaboratoryExaminationComponent = /*#__PURE__*/(() => {\n  class LaboratoryExaminationComponent {\n    constructor(apiService, toast, datePipe, authService) {\n      this.apiService = apiService;\n      this.toast = toast;\n      this.datePipe = datePipe;\n      this.authService = authService;\n      this.content = {\n        name: \"Laboratory Examination Form\",\n        errors: [],\n        categories: [],\n        samples: [],\n        forms: {\n          district: {}\n        },\n        fixedColumnHeader: [],\n        columnHeader: [],\n        apiLink: '/forms/laboratory',\n        user: {},\n        fileLocked: false\n      };\n      this.loading = false;\n      this.content.user = this.authService.userValue;\n    }\n\n    ngOnInit() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        yield _this.getDistricts();\n        yield _this.getAnimalCategories();\n        yield _this.getSamples();\n      })();\n    }\n\n    ngAfterViewInit() {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        yield _this2.getForm();\n      })();\n    }\n\n    getDistricts() {\n      var _this3 = this;\n\n      return _asyncToGenerator(function* () {\n        _this3.loading = true;\n\n        _this3.apiService.getData('/master/districts', null).subscribe(res => {\n          _this3.loading = false;\n\n          if (!res) {\n            _this3.toast.error(\"Could not connect to Server. Try again after sometime.\", {\n              position: 'top-right',\n              autoClose: true\n            });\n          } else {\n            if (res.data.length <= 0) {\n              _this3.content.errorMessage = \"No Districts found. Click 'Add New' to add.\";\n            }\n\n            _this3.content.districts = res.data;\n          }\n        }, error => {\n          _this3.loading = false;\n          _this3.content.errorMessage = \"Could not load data at this time. Try again later.\";\n        });\n      })();\n    }\n\n    getAnimalCategories() {\n      var _this4 = this;\n\n      return _asyncToGenerator(function* () {\n        _this4.loading = true;\n\n        _this4.apiService.getData(`/master/animals/category`, null).subscribe(res => {\n          _this4.loading = false;\n\n          if (!res) {\n            _this4.toast.error(\"Could not connect to Server. Try again after sometime.\", {\n              position: 'top-right',\n              autoClose: true\n            });\n          } else {\n            if (res.length <= 0) {\n              _this4.content.errors.push(\"No animal categories found.\");\n            }\n\n            _this4.content.categories = res;\n\n            _this4.content.categories.forEach(function (_cat) {\n              _cat.subTests = [];\n            });\n          }\n        }, error => {\n          _this4.loading = false;\n\n          _this4.content.errors.push(\"Could not load data at this time. Try again later.\");\n        });\n      })();\n    }\n\n    approveEdit() {\n      this.apiService.putData(`/forms/${this.content.forms.id}/toggleLabFormLock`, this.content.forms.id, null).subscribe(res => {\n        if (!res) {\n          this.toast.error(\"Could not connect to Server. Try again after sometime.\", {\n            position: 'top-right',\n            autoClose: true\n          });\n        } else {\n          this.toast.success(\"Form is unlocked, user can re-edit the form again.\", {\n            position: 'top-right',\n            autoClose: true\n          });\n          this.getForm();\n        }\n      }, error => {\n        this.loading = false;\n        this.content.errors.push(\"Could not load data at this time. Try again later.\");\n      });\n    }\n\n    getForm() {\n      var _this5 = this;\n\n      return _asyncToGenerator(function* () {\n        _this5.loading = true;\n\n        _this5.apiService.postData(`/forms/laboratory/get`, {\n          createdDate: new Date(_this5.content.forms.createdDate),\n          formType: _this5.content.FormsType_Incidence,\n          formName: _this5.content.formName\n        }).subscribe(res => {\n          _this5.loading = false;\n\n          if (res != null) {\n            _this5.content.forms.createdDate = _this5.datePipe.transform(res.createdDate, \"yyyy-MM\");\n            _this5.content.forms.district.id = res.district.id;\n            _this5.content.forms.id = res.id;\n            let timer = 0;\n            res.labFormValues.forEach(function (fd) {\n              setTimeout(() => {\n                if ($(`#animal_${fd.testTypes.id}_${fd.animalCategory.id}_noOfCase`).length <= 0) {\n                  timer++;\n                } else {\n                  $(`#animal_${fd.testTypes.id}_${fd.animalCategory.id}_total`).val(fd.totalValue);\n                  $(`#animal_${fd.testTypes.id}_${fd.animalCategory.id}_noOfCase`).val(fd.noOfPositiveCases);\n                  clearTimeout();\n                }\n              }, timer);\n            });\n\n            if (_this5.content.forms.isLocked) {\n              _this5.content.fileLocked = true;\n            }\n\n            _this5.getSelectedValues();\n\n            _this5.content.fileLocked = res.isLocked;\n          } else {\n            _this5.content.forms.currentStep = null;\n            _this5.content.fileLocked = false;\n          }\n        }, error => {\n          _this5.loading = false;\n        });\n      })();\n    }\n\n    getSelectedValues() {\n      var timer = 1;\n\n      if (!this.content.forms.district) {\n        setTimeout(() => {\n          if (this.content.forms.district) {\n            clearTimeout();\n          } else {\n            timer++;\n          }\n        }, timer);\n      }\n\n      this.content.forms.createdDate = this.datePipe.transform(this.content.forms.createdDate, \"yyyy-MM\");\n    }\n\n    getSamples() {\n      var _this6 = this;\n\n      return _asyncToGenerator(function* () {\n        _this6.loading = true;\n\n        _this6.apiService.getData(`/samples`, null).subscribe(res => {\n          _this6.loading = false;\n\n          if (!res) {\n            _this6.toast.error(\"Could not connect to Server. Try again after sometime.\", {\n              position: 'top-right',\n              autoClose: true\n            });\n          } else {\n            if (res.length <= 0) {\n              _this6.content.errors.push(\"No Samples test cases found. Try again after sometime.\");\n            }\n\n            res.forEach(function (samples) {\n              samples.testTypes.forEach(function (testCase) {\n                testCase.subTests.forEach(function (_sub) {\n                  _sub.total = 0;\n                  _sub.totalNoOfveCases = 0;\n                });\n              });\n            });\n            _this6.content.samples = [] = res;\n\n            _this6.getColumnHeaders();\n          }\n        }, error => {\n          _this6.loading = false;\n\n          _this6.content.errors.push(\"Could not load data at this time. Try again later.\");\n        });\n      })();\n    }\n\n    getFixedHeaders() {\n      let flag = 0;\n      this.content.samples.forEach(sample => {\n        sample.testTypes.forEach(testType1 => {\n          testType1.subTests.forEach(testType2 => {\n            if (testType2.name != null && flag == 0) {\n              this.content.fixedColumnHeader.push(\"Test Type 2\");\n              flag = 1;\n            }\n          });\n        });\n      });\n    }\n\n    getColumnHeaders() {\n      if (this.content.samples.length > 0) {\n        this.content.fixedColumnHeader.push(\"Samples\");\n        this.content.samples.every(sample => {\n          if (sample.testTypes.length > 0) {\n            this.content.fixedColumnHeader.push(\"Test Type 1\");\n            return false;\n          }\n\n          return true;\n        });\n      }\n\n      this.getFixedHeaders();\n      this.content.categories.forEach(category => {\n        this.content.columnHeader.push(category.name);\n      });\n      this.content.columnHeader.push(\"Total\");\n    }\n\n    save() {\n      this.loading = true;\n      let $this = this;\n      this.loading = false;\n      this.content.forms.animals = this.content.animals;\n\n      var _obj = this.createPostObject($this);\n\n      this.apiService.postData(this.content.apiLink, _obj).subscribe(res => {\n        this.loading = false;\n\n        if (res) {\n          this.getForm();\n        }\n      }, error => {\n        this.loading = false;\n      });\n    }\n\n    createPostObject($this) {\n      var _obj = {\n        createdDate: this.content.forms.createdDate,\n        district: this.content.forms.district,\n        samples: this.content.samples,\n        remarks: this.content.forms.remarks,\n        formName: this.content.formName,\n        categories: this.content.categories\n      };\n\n      _obj.categories.forEach(function (_cat) {\n        _cat.tests = [];\n        $this.content.samples.forEach(function (_sample) {\n          _sample.testTypes.forEach(function (_testTypes) {\n            _testTypes.subTests.forEach(function (_subTest) {\n              var _obj = {\n                testType: _subTest,\n                totalValue: $(`#animal_${_subTest.id}_${_cat.id}_total`).val(),\n                noOfPositiveCases: $(`#animal_${_subTest.id}_${_cat.id}_noOfCase`).val()\n              };\n              _obj.testType.sample = {};\n              $.extend(_obj.testType.sample, _sample);\n              delete _obj.testType.sample.testTypes;\n\n              _cat.tests.push(_obj);\n            });\n          });\n        });\n      });\n\n      return _obj;\n    }\n\n  }\n\n  LaboratoryExaminationComponent.ɵfac = function LaboratoryExaminationComponent_Factory(t) {\n    return new (t || LaboratoryExaminationComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.HotToastService), i0.ɵɵdirectiveInject(i3.DatePipe), i0.ɵɵdirectiveInject(i4.AuthenticationService));\n  };\n\n  LaboratoryExaminationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LaboratoryExaminationComponent,\n    selectors: [[\"app-laboratory-examination\"]],\n    decls: 2,\n    vars: 2,\n    consts: [[\"class\", \"alert alert-warning mt-4\", 4, \"ngIf\"], [3, \"ngIf\"], [1, \"alert\", \"alert-warning\", \"mt-4\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", 1, \"stroke-current\", \"flex-shrink-0\", \"h-6\", \"w-6\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"], [4, \"ngIf\"], [1, \"container\", \"mt-5\", \"grid\", \"grid-cols-2\"], [1, \"card-title\"], [1, \"flex-column\"], [\"class\", \"fa fa-lock text-yellow-500 fa-1x place-self-end\", 4, \"ngIf\"], [\"class\", \"text-sm text-gray-500 text-bold-0\", 4, \"ngIf\"], [1, \"flex\", \"justify-self-end\"], [1, \"my\", \"md:min-w-full\", \"mt-4\"], [\"class\", \"relative w-full md:mb-4 mt-4 grid md:grid-cols-5 md:gap-2\", 4, \"ngIf\"], [\"class\", \"grid mt-5 w-full h-[28rem]\", 4, \"ngIf\"], [1, \"flex\", \"flex-row\", \"justify-end\", \"mt-4\"], [1, \"fa\", \"fa-lock\", \"text-yellow-500\", \"fa-1x\", \"place-self-end\"], [1, \"text-sm\", \"text-gray-500\", \"text-bold-0\"], [1, \"text-red-500\"], [1, \"fa\", \"fa-info\", \"text-primary\"], [\"class\", \"btn btn-sqaure loading\", 4, \"ngIf\"], [\"id\", \"btnPrimarySave\", \"class\", \"btn btn-primary btnSave btn-md\", 3, \"ngClass\", \"click\", 4, \"ngIf\"], [1, \"btn\", \"btn-sqaure\", \"loading\"], [\"id\", \"btnPrimarySave\", 1, \"btn\", \"btn-primary\", \"btnSave\", \"btn-md\", 3, \"ngClass\", \"click\"], [\"class\", \"btn btn-warning btn-md\", 3, \"click\", 4, \"ngIf\"], [1, \"btn\", \"btn-warning\", \"btn-md\", 3, \"click\"], [1, \"relative\", \"w-full\", \"md:mb-4\", \"mt-4\", \"grid\", \"md:grid-cols-5\", \"md:gap-2\"], [1, \"block\", \"text-gray-700\", \"mt-4\", \"text-sm\", \"font-semibold\", \"mb-2\"], [\"id\", \"txtCreatedDate\", \"type\", \"month\", \"placeholder\", \"Name\", \"name\", \"Name\", \"required\", \"\", \"minlength\", \"1\", \"maxlength\", \"250\", 1, \"rounded-md\", \"w-full\", \"form-input\", \"focus:ring\", 3, \"ngModel\", \"change\", \"ngModelChange\"], [\"id\", \"selDistrict\", 1, \"form-input\", \"focus:ring\", \"w-full\", \"rounded-md\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"grid\", \"mt-5\", \"w-full\", \"h-[28rem]\"], [1, \"w-full\", \"mt-5\", \"overflow-hidden\"], [\"class\", \"mt-5 alert shadow alert-error\", 4, \"ngIf\"], [3, \"content\", \"appDisable\"], [1, \"mt-4\"], [1, \"font-semibold\", \"mb-3\"], [\"rows\", \"4\", 1, \"form-input\", \"rounded\", \"w-full\", \"focus:ring\", 3, \"appDisable\", \"ngModel\", \"ngModelOptions\", \"ngModelChange\"], [1, \"mt-5\", \"alert\", \"shadow\", \"alert-error\"], [1, \"fa\", \"fa-exclamation-triangle\", \"text-yellow\"], [\"id\", \"btnPrimarySave\", \"class\", \"btn btn-primary btnSave btn-md mt-5\", 3, \"ngClass\", \"click\", 4, \"ngIf\"], [\"id\", \"btnPrimarySave\", 1, \"btn\", \"btn-primary\", \"btnSave\", \"btn-md\", \"mt-5\", 3, \"ngClass\", \"click\"]],\n    template: function LaboratoryExaminationComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, LaboratoryExaminationComponent_div_0_Template, 6, 2, \"div\", 0);\n        i0.ɵɵtemplate(1, LaboratoryExaminationComponent_ng_template_1_Template, 17, 10, \"ng-template\", 1);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.content.categories.length <= 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.content.categories.length > 0);\n      }\n    },\n    directives: [i3.NgIf, i3.NgClass, i5.DefaultValueAccessor, i5.RequiredValidator, i5.MinLengthValidator, i5.MaxLengthValidator, i5.NgControlStatus, i5.NgModel, i5.SelectControlValueAccessor, i3.NgForOf, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i6.LaboratoryFormComponent, i7.DisableDirective],\n    styles: [\"\"]\n  });\n  return LaboratoryExaminationComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}