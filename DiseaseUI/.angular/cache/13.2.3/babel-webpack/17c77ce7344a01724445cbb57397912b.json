{"ast":null,"code":"import { moveItemInArray } from '@angular/cdk/drag-drop';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../_services/api.service\";\nimport * as i2 from \"@ngneat/hot-toast\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/cdk/drag-drop\";\nimport * as i5 from \"@sweetalert2/ngx-sweetalert2\";\nimport * as i6 from \"ng2-search-filter\";\n\nfunction AnimalTableComponent_table_0_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\", 6);\n    i0.ɵɵelementStart(1, \"td\", 2);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 3);\n    i0.ɵɵelementStart(12, \"label\", 7);\n    i0.ɵɵlistener(\"click\", function AnimalTableComponent_table_0_tr_14_Template_label_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return ctx_r5.edit(item_r2);\n    });\n    i0.ɵɵelement(13, \"i\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"swal\", 9, 10);\n    i0.ɵɵlistener(\"confirm\", function AnimalTableComponent_table_0_tr_14_Template_swal_confirm_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return ctx_r7.delete(item_r2.id);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"a\", 11);\n    i0.ɵɵelement(17, \"i\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    const i_r3 = ctx.index;\n\n    const _r4 = i0.ɵɵreference(15);\n\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i_r3 + 1, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", item_r2.name, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r2.category.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", item_r2.listingOrder, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"title\", \"Delete \", item_r2.name, \"?\");\n    i0.ɵɵproperty(\"showCancelButton\", true)(\"focusCancel\", true);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"swal\", _r4);\n  }\n}\n\nfunction AnimalTableComponent_table_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"table\", 1);\n    i0.ɵɵelementStart(1, \"thead\");\n    i0.ɵɵelementStart(2, \"tr\");\n    i0.ɵɵelementStart(3, \"td\", 2);\n    i0.ɵɵtext(4, \"#\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Category\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Listing Order\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\", 3);\n    i0.ɵɵtext(12, \"Options\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"tbody\", 4);\n    i0.ɵɵlistener(\"cdkDropListDropped\", function AnimalTableComponent_table_0_Template_tbody_cdkDropListDropped_13_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.drop($event, ctx_r8.content.animals);\n    });\n    i0.ɵɵtemplate(14, AnimalTableComponent_table_0_tr_14_Template, 18, 8, \"tr\", 5);\n    i0.ɵɵpipe(15, \"filter\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(14);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(15, 1, ctx_r0.content.animals, ctx_r0.searchTerm));\n  }\n}\n\nexport let AnimalTableComponent = /*#__PURE__*/(() => {\n  class AnimalTableComponent {\n    constructor(apiService, toast) {\n      this.apiService = apiService;\n      this.toast = toast;\n    }\n\n    ngOnInit() {}\n\n    setData(content) {\n      this.content = content;\n    }\n\n    drop(event, updateAnimalList) {\n      moveItemInArray(this.content.animals, event.previousIndex, event.currentIndex);\n      updateAnimalList.forEach(function (_animal, index) {\n        _animal.listingOrder = index;\n      });\n      console.log(updateAnimalList);\n      this.apiService.postData('/master/animals/updateListingOrder', updateAnimalList).subscribe(res => {//\n      });\n    }\n\n    edit(item) {\n      this.content.title = `Edit ${this.content.name}`;\n      this.content.caller = 'PUT';\n      this.content.Animals = item;\n      this.content.typeOf = 'animals';\n      this.content.apiLink = '/master/animals';\n    }\n\n    delete(id) {\n      this.apiService.deleteData(`/master/animals/${id}`, id).subscribe(res => {}, error => {\n        this.toast.error(\"Error deleting, try again after sometime.\", {\n          position: 'top-right',\n          autoClose: true\n        });\n      });\n    }\n\n  }\n\n  AnimalTableComponent.ɵfac = function AnimalTableComponent_Factory(t) {\n    return new (t || AnimalTableComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.HotToastService));\n  };\n\n  AnimalTableComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AnimalTableComponent,\n    selectors: [[\"app-animal-table\"]],\n    inputs: {\n      content: \"content\",\n      searchTerm: \"searchTerm\"\n    },\n    decls: 1,\n    vars: 1,\n    consts: [[\"class\", \"table border w-full\", 4, \"ngIf\"], [1, \"table\", \"border\", \"w-full\"], [1, \"border-r\"], [1, \"text-right\"], [\"cdkDropList\", \"\", 3, \"cdkDropListDropped\"], [\"class\", \"hover\", \"cdkDrag\", \"\", 4, \"ngFor\", \"ngForOf\"], [\"cdkDrag\", \"\", 1, \"hover\"], [\"href\", \"javascript:void(0)\", \"for\", \"Animals-modal\", 1, \"mr-3\", \"modal-button\", 3, \"click\"], [1, \"fa\", \"fa-pen-to-square\", \"fa-1x\"], [\"text\", \"This cannot be undone\", \"icon\", \"question\", 3, \"title\", \"showCancelButton\", \"focusCancel\", \"confirm\"], [\"deleteSwal\", \"\"], [1, \"mr-3\", 3, \"swal\"], [1, \"fa\", \"fa-trash-can\", \"fa-1x\", \"text-red-500\"]],\n    template: function AnimalTableComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, AnimalTableComponent_table_0_Template, 16, 4, \"table\", 0);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.content.animals.length > 0);\n      }\n    },\n    directives: [i3.NgIf, i4.CdkDropList, i3.NgForOf, i4.CdkDrag, i5.SwalComponent, i5.SwalDirective],\n    pipes: [i6.Ng2SearchPipe],\n    styles: [\".example-list[_ngcontent-%COMP%]{overflow:hidden}.example-box[_ngcontent-%COMP%]{cursor:move}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}\"]\n  });\n  return AnimalTableComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}