{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../_services/api.service\";\nimport * as i2 from \"@ngneat/hot-toast\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@sweetalert2/ngx-sweetalert2\";\nimport * as i7 from \"./components/edit-user.component\";\nimport * as i8 from \"ng2-search-filter\";\n\nfunction UserManagementComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵelement(2, \"i\", 22);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.content.errorMessage, \" \");\n  }\n}\n\nfunction UserManagementComponent_div_26_table_1_tr_14_p_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r4.userRoles[0]);\n  }\n}\n\nfunction UserManagementComponent_div_26_table_1_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\", 30);\n    i0.ɵɵelementStart(1, \"td\", 27);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtemplate(7, UserManagementComponent_div_26_table_1_tr_14_p_7_Template, 2, 1, \"p\", 31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 28);\n    i0.ɵɵelementStart(12, \"label\", 32);\n    i0.ɵɵlistener(\"click\", function UserManagementComponent_div_26_table_1_tr_14_Template_label_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const item_r4 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(3);\n      return ctx_r9.edit(item_r4);\n    });\n    i0.ɵɵelement(13, \"i\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"label\", 34);\n    i0.ɵɵlistener(\"click\", function UserManagementComponent_div_26_table_1_tr_14_Template_label_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const item_r4 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext(3);\n      return ctx_r11.changePassword(item_r4);\n    });\n    i0.ɵɵelement(15, \"i\", 35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"swal\", 36, 37);\n    i0.ɵɵlistener(\"confirm\", function UserManagementComponent_div_26_table_1_tr_14_Template_swal_confirm_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const item_r4 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext(3);\n      return ctx_r12.delete(item_r4.id);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"a\", 38);\n    i0.ɵɵelement(19, \"i\", 39);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r4 = ctx.$implicit;\n    const i_r5 = ctx.index;\n\n    const _r7 = i0.ɵɵreference(17);\n\n    const ctx_r3 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i_r5 + 1, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", item_r4.userName, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", item_r4.userRoles != null);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", item_r4.location, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"for\", \"\", ctx_r3.content.name, \"-modal\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate2(\"title\", \"\", item_r4.isActive ? \"Archive\" : \"Un-archive\", \" \", item_r4.name, \"?\");\n    i0.ɵɵpropertyInterpolate(\"text\", item_r4.isActive ? \"You can un-archive from Archived List\" : \"You can re-archive from the list.\");\n    i0.ɵɵproperty(\"showCancelButton\", true)(\"focusCancel\", true);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"swal\", _r7);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", !item_r4.isActive ? \"fa-archive\" : \"fa-redo\");\n  }\n}\n\nfunction UserManagementComponent_div_26_table_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 25);\n    i0.ɵɵelementStart(1, \"thead\", 26);\n    i0.ɵɵelementStart(2, \"tr\");\n    i0.ɵɵelementStart(3, \"td\", 27);\n    i0.ɵɵtext(4, \"#\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"UserName\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Type of User\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Location\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\", 28);\n    i0.ɵɵtext(12, \"Options\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"tbody\");\n    i0.ɵɵtemplate(14, UserManagementComponent_div_26_table_1_tr_14_Template, 20, 12, \"tr\", 29);\n    i0.ɵɵpipe(15, \"filter\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(14);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(15, 1, ctx_r2.content.data, ctx_r2.searchTerm));\n  }\n}\n\nfunction UserManagementComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtemplate(1, UserManagementComponent_div_26_table_1_Template, 16, 4, \"table\", 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.content.data.length > 0);\n  }\n}\n\nconst _c0 = function () {\n  return {\n    standalone: false\n  };\n};\n\nexport let UserManagementComponent = /*#__PURE__*/(() => {\n  class UserManagementComponent {\n    constructor(apiService, toast, router) {\n      this.apiService = apiService;\n      this.toast = toast;\n      this.router = router;\n      this.content = {\n        title: '',\n        name: \"User\",\n        data: [],\n        archivedRecords: [],\n        allRecords: [],\n        fields: [],\n        errorMessage: \"\",\n        apiLink: '/auth',\n        caller: '',\n        User: {},\n        archivedTitle: 'Archived',\n        requiredMapping: {\n          link: '/auth/roles',\n          title: 'Roles',\n          name: 'RoleId',\n          mappingData: []\n        }\n      };\n    }\n\n    ngOnInit() {\n      this.get();\n    }\n\n    get() {\n      this.apiService.getData(`/user`, null).subscribe(res => {\n        if (!res) {\n          this.toast.error(\"Could not connect to Server. Try again after sometime.\", {\n            position: 'top-right',\n            autoClose: true\n          });\n        } else {\n          if (res.length <= 0) {\n            this.content.errorMessage = \"No Users found. Click 'Add New' to add.\";\n          }\n\n          this.content.data = res;\n          this.content.archivedRecords = res.filter(a => a.isActive = !a.isActive);\n          this.content.allRecords = res;\n        }\n      }, error => {\n        this.content.errorMessage = \"Could not load data at this time. Try again later.\";\n      });\n    }\n\n    create() {\n      this.content.title = `Add ${this.content.name}`;\n      this.content.caller = 'POST';\n      this.content.User = {};\n      this.apiService.getData(this.content.requiredMapping.link, null).subscribe(res => {\n        this.content.requiredMapping.mappingData = res.data;\n      });\n      this.content.apiLink = \"/auth/register\";\n    }\n\n    edit(item) {\n      this.content.title = `Edit ${this.content.name}`;\n      this.content.caller = 'PUT';\n      this.apiService.getData(this.content.requiredMapping.link, null).subscribe(res => {\n        this.content.requiredMapping.mappingData = res.data;\n      });\n      this.content.User = item;\n      this.content.User.role = item.userRoles == null ? '' : item.userRoles[0];\n      this.content.apiLink = \"/auth/users\";\n    }\n\n    changePassword(item) {\n      this.content.User = item;\n      this.content.apiLink = `/auth/users/${item.id}/resetPassword`;\n    }\n\n    toggleArchiveList() {\n      this.content.data = this.content.archivedRecords;\n    }\n\n    viewAll() {\n      this.content.data = this.content.allRecords;\n    }\n\n    delete(id) {\n      this.apiService.postData(`/user/toggleStatus/${id}`, id).subscribe(res => {\n        if (res) this.toast.success(\"User archived\", {\n          position: 'top-right',\n          autoClose: true\n        });\n        this.router.navigate([this.router.url]);\n      }, error => {\n        this.toast.error(\"Error archiving, try again after sometime.\", {\n          position: 'top-right',\n          autoClose: true\n        });\n      });\n    }\n\n  }\n\n  UserManagementComponent.ɵfac = function UserManagementComponent_Factory(t) {\n    return new (t || UserManagementComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.HotToastService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n\n  UserManagementComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UserManagementComponent,\n    selectors: [[\"app-user-management\"]],\n    decls: 28,\n    vars: 9,\n    consts: [[1, \"flex\", \"flex-wrap\"], [1, \"container\", \"mt-5\", \"grid\", \"grid-cols-3\"], [1, \"card-title\"], [1, \"flex-column\"], [1, \"text-sm\", \"text-gray-500\"], [1, \"fa\", \"fa-edit\"], [1, \"justify-self-end\", \"mt-3\"], [1, \"w-full\"], [\"type\", \"radio\", \"value\", \"1\", \"name\", \"archive_\", 1, \"radio\", \"checked:bg-red-500\", 3, \"change\"], [1, \"label-text\", \"ml-2\", \"mr-5\", \"text-gray-700\", \"font-semibold\"], [1, \"ml-2\", \"mr-2\", \"w-full\"], [\"type\", \"radio\", \"value\", \"0\", \"name\", \"archive_\", 1, \"radio\", \"checked:bg-red-500\", 3, \"change\"], [1, \"label-text\", \"ml-2\", \"text-gray-700\", \"font-semibold\"], [1, \"flex\", \"justify-self-end\"], [1, \"form-control\", \"justify-self-end\", \"w-full\"], [\"type\", \"search\", \"placeholder\", \"Search\", 1, \"input\", \"input-bordered\", 3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\"], [1, \"btn\", \"btn-primary\", \"ml-5\", \"modal-button\", 3, \"for\", \"click\"], [1, \"fa-solid\", \"fa-plus\", \"mr-2.5\"], [\"class\", \"mt-5 alert shadow alert-error\", 4, \"ngIf\"], [\"class\", \"overflow-x-auto w-full mt-5 border rounded-md card\", 4, \"ngIf\"], [3, \"content\"], [1, \"mt-5\", \"alert\", \"shadow\", \"alert-error\"], [1, \"fa\", \"fa-exclamation-triangle\", \"text-yellow\"], [1, \"overflow-x-auto\", \"w-full\", \"mt-5\", \"border\", \"rounded-md\", \"card\"], [\"class\", \"table border w-full\", 4, \"ngIf\"], [1, \"table\", \"border\", \"w-full\"], [1, \"bg-white\"], [1, \"border-r\"], [1, \"text-right\"], [\"class\", \"hover\", 4, \"ngFor\", \"ngForOf\"], [1, \"hover\"], [4, \"ngIf\"], [\"href\", \"javascript:void(0)\", 1, \"mr-3\", \"modal-button\", 3, \"for\", \"click\"], [1, \"fa\", \"fa-pen-to-square\", \"fa-1x\"], [\"for\", \"ChangePassword-modal\", 1, \"mr-3\", \"modal-button\", 3, \"click\"], [1, \"fa\", \"fa-key\", \"fa-1x\"], [\"icon\", \"question\", 3, \"title\", \"text\", \"showCancelButton\", \"focusCancel\", \"confirm\"], [\"deleteSwal\", \"\"], [1, \"mr-3\", 3, \"swal\"], [1, \"fa\", \"fa-1x\", \"text-red-500\", 3, \"ngClass\"]],\n    template: function UserManagementComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"h1\", 2);\n        i0.ɵɵelementStart(3, \"span\", 3);\n        i0.ɵɵtext(4);\n        i0.ɵɵelement(5, \"br\");\n        i0.ɵɵelementStart(6, \"span\", 4);\n        i0.ɵɵtext(7, \"Click '\");\n        i0.ɵɵelement(8, \"i\", 5);\n        i0.ɵɵtext(9, \"' icon to edit list item.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 6);\n        i0.ɵɵelementStart(11, \"label\", 7);\n        i0.ɵɵelementStart(12, \"input\", 8);\n        i0.ɵɵlistener(\"change\", function UserManagementComponent_Template_input_change_12_listener() {\n          return ctx.viewAll();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"span\", 9);\n        i0.ɵɵtext(14, \"View all\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"label\", 10);\n        i0.ɵɵelementStart(16, \"input\", 11);\n        i0.ɵɵlistener(\"change\", function UserManagementComponent_Template_input_change_16_listener() {\n          return ctx.toggleArchiveList();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"span\", 12);\n        i0.ɵɵtext(18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"div\", 13);\n        i0.ɵɵelementStart(20, \"div\", 14);\n        i0.ɵɵelementStart(21, \"input\", 15);\n        i0.ɵɵlistener(\"ngModelChange\", function UserManagementComponent_Template_input_ngModelChange_21_listener($event) {\n          return ctx.searchTerm = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"label\", 16);\n        i0.ɵɵlistener(\"click\", function UserManagementComponent_Template_label_click_22_listener() {\n          return ctx.create();\n        });\n        i0.ɵɵelement(23, \"i\", 17);\n        i0.ɵɵtext(24, \" Add new \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(25, UserManagementComponent_div_25_Template, 4, 1, \"div\", 18);\n        i0.ɵɵtemplate(26, UserManagementComponent_div_26_Template, 2, 1, \"div\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(27, \"app-edit-user\", 20);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" Manage \", ctx.content.name, \" \");\n        i0.ɵɵadvance(14);\n        i0.ɵɵtextInterpolate(ctx.content.archivedTitle);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.searchTerm)(\"ngModelOptions\", i0.ɵɵpureFunction0(8, _c0));\n        i0.ɵɵadvance(1);\n        i0.ɵɵpropertyInterpolate1(\"for\", \"\", ctx.content.name, \"-modal\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.content.errorMessage != \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.content.data.length > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"content\", ctx.content);\n      }\n    },\n    directives: [i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i5.NgIf, i5.NgForOf, i6.SwalComponent, i6.SwalDirective, i5.NgClass, i7.EditUserComponent],\n    pipes: [i8.Ng2SearchPipe],\n    styles: [\"\"]\n  });\n  return UserManagementComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}